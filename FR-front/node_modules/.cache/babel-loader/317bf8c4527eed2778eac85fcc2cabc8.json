{"ast":null,"code":"import \"core-js/modules/es.typed-array.at.js\";\nimport \"core-js/modules/es.typed-array.set.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\nimport { Plus } from \"@element-plus/icons-vue\";\nimport { Delete } from \"@element-plus/icons-vue\";\nimport { SwitchButton } from \"@element-plus/icons-vue\";\nimport { Edit } from \"@element-plus/icons-vue\";\nimport axios from \"axios\";\nexport default {\n  name: \"app\",\n\n  data() {\n    return {\n      dialogTableVisible: false,\n      imageUrl_1: \"\",\n      imageUrl_2: \"\",\n      Delete,\n      SwitchButton,\n      Edit,\n      picurl: \"\",\n      eps: \"\",\n      goal: \"\",\n      metric: \"\",\n      model: \"\",\n      models: [{\n        value: \"MobileFace\",\n        label: \"MobileFace\"\n      }, {\n        value: \"Mobilenet\",\n        label: \"Mobilenet\"\n      }, {\n        value: \"ArcFace\",\n        label: \"ArcFace\"\n      }, {\n        value: \"MobilenetV2\",\n        label: \"MobilenetV2\"\n      }, {\n        value: \"ShuffleNet_V1\",\n        label: \"ShuffleNet_V1\"\n      }, {\n        value: \"ShuffleNet_V2\",\n        label: \"ShuffleNet_V2\"\n      }, {\n        value: \"IR50-Softmax\",\n        label: \"IR50-Softmax\"\n      }, {\n        value: \"IR50-CosFace\",\n        label: \"IR50-CosFace\"\n      }, {\n        value: \"IR50-Am\",\n        label: \"IR50-Am\"\n      }, {\n        value: \"IR50-SphereFace\",\n        label: \"IR50-SphereFace\"\n      }],\n      attack: \"PGD\",\n      attacks: [// {\n      //   value: \"FGSM\",\n      //   label: \"FGSM\",\n      // },\n      // {\n      //   value: \"CIM\",\n      //   label: \"CIM\",\n      // },\n      {\n        value: \"DIM\",\n        label: \"DIM\"\n      }, {\n        value: \"MIM\",\n        label: \"MIM\"\n      }, {\n        value: \"PGD\",\n        label: \"PGD\"\n      }, {\n        value: \"TIM\",\n        label: \"TIM\"\n      }],\n      iters: \"\",\n      mu: \"\",\n      length: \"\",\n      kernel_len: \"\",\n      nsig: \"\",\n      tableData: [{\n        score: \"\",\n        or: \"\"\n      }],\n      score: \"\"\n    };\n  },\n\n  methods: {\n    goBack() {\n      this.$router.push(\"/home\");\n    },\n\n    cc() {\n      this.dialogTableVisible = true;\n      setTimeout(() => {\n        this.dialogTableVisible = false;\n      }, 5000);\n    },\n\n    // 上传图片\n    async uploadFile_1(params) {\n      let form = new FormData();\n      form.append(\"file\", params.file);\n      const res = await axios.post(\"http://127.0.0.1:5000/upload?src=0\", form);\n      console.log(res);\n      this.imageUrl_1 = res.data;\n    },\n\n    async uploadFile_2(params) {\n      let form = new FormData();\n      form.append(\"file\", params.file);\n      const res = await axios.post(\"http://127.0.0.1:5000/upload?src=1\", form);\n      console.log(res);\n      this.imageUrl_2 = res.data;\n    },\n\n    //删除图片\n    del_1() {\n      axios.get(\"http://127.0.0.1:5000/delete_1\", {}).then(res => {\n        this.imageUrl_1 = res.data.img;\n      });\n    },\n\n    del_2() {\n      axios.get(\"http://127.0.0.1:5000/delete_2\", {}).then(res => {\n        this.imageUrl_2 = res.data.img;\n      });\n    },\n\n    //从服务器获取图片\n    getPic() {\n      this.dialogTableVisible = true;\n      var that = this;\n      axios({\n        method: \"get\",\n        url: \"http://127.0.0.1:5000/getPic?eps=\" + this.eps + \"&goal=\" + this.goal + \"&metric=\" + this.metric + \"&model=\" + this.model + \"&attack=\" + this.attack + \"&iters=\" + this.iters + \"&length=\" + this.length + \"&mu=\" + this.mu + \"&kernel_len=\" + this.kernel_len + \"&nsig=\" + this.nsig,\n        responseType: \"arraybuffer\" // 最为关键\n\n      }).then(function (response) {\n        that.dialogTableVisible = false;\n        that.picurl = \"data:image/png;base64,\" + that.arrayBufferToBase64(response.data);\n      });\n    },\n\n    // ArrayBuffer转为base64字符串\n    arrayBufferToBase64(buffer) {\n      //第一步，将ArrayBuffer转为二进制字符串\n      var binary = \"\";\n      var bytes = new Uint8Array(buffer);\n      var len = bytes.byteLength;\n\n      for (var i = 0; i < len; i++) {\n        binary += String.fromCharCode(bytes[i]);\n      } //将二进制字符串转为base64字符串\n\n\n      return window.btoa(binary);\n    },\n\n    getScore() {\n      axios.get(\"http://127.0.0.1:5000/contrast\", {}).then(res => {\n        this.tableData[0].score = res.data.Score;\n\n        if (this.tableData[0].score >= 50) {\n          this.tableData[0].or = \"Yes\";\n        } else {\n          this.tableData[0].or = \"No\";\n        }\n      }); // console.log(this.tableData[0].score);\n    }\n\n  },\n  components: {\n    Plus\n  }\n};","map":{"version":3,"mappings":"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","names":["Plus","Delete","SwitchButton","Edit","axios","name","data","dialogTableVisible","imageUrl_1","imageUrl_2","picurl","eps","goal","metric","model","models","value","label","attack","attacks","iters","mu","length","kernel_len","nsig","tableData","score","or","methods","goBack","$router","push","cc","setTimeout","uploadFile_1","params","form","FormData","append","file","res","post","console","log","uploadFile_2","del_1","get","then","img","del_2","getPic","that","method","url","responseType","response","arrayBufferToBase64","buffer","binary","bytes","Uint8Array","len","byteLength","i","String","fromCharCode","window","btoa","getScore","Score","components"],"sourceRoot":"","sources":["D:\\SystemDefault\\桌面\\FR-ADV-main\\FR-front\\src\\components\\sign.vue"],"sourcesContent":["<template>\r\n  <el-dialog\r\n    title=\"对抗样本生成中\"\r\n    v-model=\"dialogTableVisible\"\r\n    :show-close=\"false\"\r\n    :center=\"true\"\r\n  >\r\n    <el-progress\r\n      :percentage=\"100\"\r\n      status=\"success\"\r\n      :indeterminate=\"true\"\r\n      :duration=\"5\"\r\n    />\r\n    <span>请耐心等待~</span>\r\n  </el-dialog>\r\n  <el-card class=\"na\" style=\"width: 700px; height: 530px\" shadow=\"never\">\r\n    <el-space class=\"jjjj\" direction=\"vertical\" alignment=\"center\" :size=\"30\">\r\n      <el-space class=\"jj\" direction=\"horizontal\" alignment=\"center\" :size=\"30\">\r\n        <el-upload\r\n          class=\"avatar-uploader\"\r\n          ref=\"upload\"\r\n          action=\"action\"\r\n          :show-file-list=\"false\"\r\n          :http-request=\"uploadFile_1\"\r\n        >\r\n          <img v-if=\"imageUrl_1\" :src=\"imageUrl_1\" class=\"avatar\" />\r\n          <el-icon v-else class=\"avatar-uploader-icon\"><Plus />干净样本</el-icon>\r\n        </el-upload>\r\n        <el-upload\r\n          class=\"avatar-uploader\"\r\n          ref=\"upload\"\r\n          action=\"action\"\r\n          :show-file-list=\"false\"\r\n          :http-request=\"uploadFile_2\"\r\n        >\r\n          <img v-if=\"imageUrl_2\" :src=\"imageUrl_2\" class=\"avatar\" />\r\n          <el-icon v-else class=\"avatar-uploader-icon\"><Plus />对抗样本</el-icon>\r\n        </el-upload>\r\n        <div class=\"xx\" @click=\"getPic\">\r\n          <img v-if=\"picurl\" :src=\"picurl\" class=\"avatar\" />\r\n          <el-icon v-else class=\"avatar-uploader-icon\"><Plus />目标图像</el-icon>\r\n        </div>\r\n      </el-space>\r\n      <el-space class=\"jjj\" direction=\"vertical\" alignment=\"center\" :size=\"30\">\r\n        <el-table :data=\"tableData\" style=\"width: 100%\" size=\"large\">\r\n          <el-table-column prop=\"score\" label=\"Score\" width=\"180\" />\r\n          <el-table-column prop=\"or\" label=\"Yes or No\" width=\"180\" />\r\n        </el-table>\r\n        <el-button\r\n          :icon=\"SwitchButton\"\r\n          @click=\"getScore\"\r\n          style=\"width: 120px; height: 20px; font-size: 15px\"\r\n          >测试</el-button\r\n        >\r\n      </el-space>\r\n    </el-space>\r\n    <el-page-header @back=\"goBack\" />\r\n  </el-card>\r\n\r\n  <el-card class=\"f\" style=\"width: 300px; height: 530px\" shadow=\"never\">\r\n    <!-- FGSM -->\r\n    <!-- <div v-if=\"this.attack == 'FGSM'\">\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <h3>攻击算法</h3>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-select\r\n          v-model=\"attack\"\r\n          placeholder=\"Select attack\"\r\n          style=\"width: 200px\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in attacks\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\"\r\n          />\r\n        </el-select>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <h3>模型</h3>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-select\r\n          v-model=\"model\"\r\n          placeholder=\"Select model\"\r\n          style=\"width: 200px\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in models\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\"\r\n          />\r\n        </el-select>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <h3>FGSM参数</h3>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-input\r\n          :prefix-icon=\"Edit\"\r\n          v-model=\"eps\"\r\n          placeholder=\"Please input eps\"\r\n          clearable\r\n          style=\"width: 200px\"\r\n        />\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-radio-group v-model=\"goal\">\r\n          <el-radio :label=\"0\" border>模仿攻击</el-radio>\r\n          <el-radio :label=\"1\" border>躲避攻击</el-radio>\r\n        </el-radio-group>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-radio-group v-model=\"metric\">\r\n          <el-radio :label=\"0\" border>L2</el-radio>\r\n          <el-radio :label=\"1\" border>L∞</el-radio>\r\n        </el-radio-group>\r\n      </div>\r\n    </div> -->\r\n    <!-- PGD -->\r\n    <div v-if=\"this.attack == 'PGD'\">\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <h3>攻击算法</h3>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-select\r\n          v-model=\"attack\"\r\n          placeholder=\"Select attack\"\r\n          style=\"width: 200px\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in attacks\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\"\r\n          />\r\n        </el-select>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <h3>模型</h3>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-select\r\n          v-model=\"model\"\r\n          placeholder=\"Select model\"\r\n          style=\"width: 200px\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in models\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\"\r\n          />\r\n        </el-select>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <h3>PGD参数</h3>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-input\r\n          :prefix-icon=\"Edit\"\r\n          v-model=\"eps\"\r\n          placeholder=\"Please input eps\"\r\n          clearable\r\n          style=\"width: 200px\"\r\n        />\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-input\r\n          :prefix-icon=\"Edit\"\r\n          v-model=\"iters\"\r\n          placeholder=\"Please input iters\"\r\n          clearable\r\n          style=\"width: 200px\"\r\n        />\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-radio-group v-model=\"goal\">\r\n          <el-radio :label=\"0\" border>模仿攻击</el-radio>\r\n          <el-radio :label=\"1\" border>躲避攻击</el-radio>\r\n        </el-radio-group>\r\n      </div>\r\n      <!-- <div align=\"left\" style=\"margin: 10px\">\r\n        <el-radio-group v-model=\"metric\">\r\n          <el-radio :label=\"0\" border>L2</el-radio>\r\n          <el-radio :label=\"1\" border>L∞</el-radio>\r\n        </el-radio-group>\r\n      </div> -->\r\n    </div>\r\n    <!-- CIM参数 -->\r\n    <!-- <div v-if=\"this.attack == 'CIM'\">\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <h3>攻击算法</h3>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-select\r\n          v-model=\"attack\"\r\n          placeholder=\"Select attack\"\r\n          style=\"width: 200px\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in attacks\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\"\r\n          />\r\n        </el-select>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <h3>模型</h3>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-select\r\n          v-model=\"model\"\r\n          placeholder=\"Select model\"\r\n          style=\"width: 200px\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in models\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\"\r\n          />\r\n        </el-select>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <h3>CIM参数</h3>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-input\r\n          :prefix-icon=\"Edit\"\r\n          v-model=\"eps\"\r\n          placeholder=\"Please input eps\"\r\n          clearable\r\n          style=\"width: 200px\"\r\n        />\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-input\r\n          :prefix-icon=\"Edit\"\r\n          v-model=\"iters\"\r\n          placeholder=\"Please input iters\"\r\n          clearable\r\n          style=\"width: 200px\"\r\n        />\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-input\r\n          :prefix-icon=\"Edit\"\r\n          v-model=\"length\"\r\n          placeholder=\"Please input length\"\r\n          clearable\r\n          style=\"width: 200px\"\r\n        />\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-radio-group v-model=\"goal\">\r\n          <el-radio :label=\"0\" border>模仿攻击</el-radio>\r\n          <el-radio :label=\"1\" border>躲避攻击</el-radio>\r\n        </el-radio-group>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-radio-group v-model=\"metric\">\r\n          <el-radio :label=\"0\" border>L2</el-radio>\r\n          <el-radio :label=\"1\" border>L∞</el-radio>\r\n        </el-radio-group>\r\n      </div>\r\n    </div> -->\r\n    <!-- DIM参数 -->\r\n    <div v-if=\"this.attack == 'DIM'\">\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <h3>攻击算法</h3>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-select\r\n          v-model=\"attack\"\r\n          placeholder=\"Select attack\"\r\n          style=\"width: 200px\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in attacks\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\"\r\n          />\r\n        </el-select>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <h3>模型</h3>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-select\r\n          v-model=\"model\"\r\n          placeholder=\"Select model\"\r\n          style=\"width: 200px\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in models\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\"\r\n          />\r\n        </el-select>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <h3>DIM参数</h3>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-input\r\n          :prefix-icon=\"Edit\"\r\n          v-model=\"eps\"\r\n          placeholder=\"Please input eps\"\r\n          clearable\r\n          style=\"width: 200px\"\r\n        />\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-input\r\n          :prefix-icon=\"Edit\"\r\n          v-model=\"iters\"\r\n          placeholder=\"Please input iters\"\r\n          clearable\r\n          style=\"width: 200px\"\r\n        />\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-radio-group v-model=\"goal\">\r\n          <el-radio :label=\"0\" border>模仿攻击</el-radio>\r\n          <el-radio :label=\"1\" border>躲避攻击</el-radio>\r\n        </el-radio-group>\r\n      </div>\r\n      <!-- <div align=\"left\" style=\"margin: 10px\">\r\n        <el-radio-group v-model=\"metric\">\r\n          <el-radio :label=\"0\" border>L2</el-radio>\r\n          <el-radio :label=\"1\" border>L∞</el-radio>\r\n        </el-radio-group>\r\n      </div> -->\r\n    </div>\r\n    <!-- MIM参数 -->\r\n    <div v-if=\"this.attack == 'MIM'\">\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <h3>攻击算法</h3>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-select\r\n          v-model=\"attack\"\r\n          placeholder=\"Select attack\"\r\n          style=\"width: 200px\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in attacks\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\"\r\n          />\r\n        </el-select>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <h3>模型</h3>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-select\r\n          v-model=\"model\"\r\n          placeholder=\"Select model\"\r\n          style=\"width: 200px\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in models\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\"\r\n          />\r\n        </el-select>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <h3>MIM参数</h3>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-input\r\n          :prefix-icon=\"Edit\"\r\n          v-model=\"eps\"\r\n          placeholder=\"Please input eps\"\r\n          clearable\r\n          style=\"width: 200px\"\r\n        />\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-input\r\n          :prefix-icon=\"Edit\"\r\n          v-model=\"iters\"\r\n          placeholder=\"Please input iters\"\r\n          clearable\r\n          style=\"width: 200px\"\r\n        />\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-input\r\n          :prefix-icon=\"Edit\"\r\n          v-model=\"mu\"\r\n          placeholder=\"Please input mu\"\r\n          clearable\r\n          style=\"width: 200px\"\r\n        />\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-radio-group v-model=\"goal\">\r\n          <el-radio :label=\"0\" border>模仿攻击</el-radio>\r\n          <el-radio :label=\"1\" border>躲避攻击</el-radio>\r\n        </el-radio-group>\r\n      </div>\r\n      <!-- <div align=\"left\" style=\"margin: 10px\">\r\n        <el-radio-group v-model=\"metric\">\r\n          <el-radio :label=\"0\" border>L2</el-radio>\r\n          <el-radio :label=\"1\" border>L∞</el-radio>\r\n        </el-radio-group>\r\n      </div> -->\r\n    </div>\r\n    <!-- TIM参数 -->\r\n    <div v-if=\"this.attack == 'TIM'\">\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <h3>攻击算法</h3>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-select\r\n          v-model=\"attack\"\r\n          placeholder=\"Select attack\"\r\n          style=\"width: 200px\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in attacks\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\"\r\n          />\r\n        </el-select>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <h3>模型</h3>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-select\r\n          v-model=\"model\"\r\n          placeholder=\"Select model\"\r\n          style=\"width: 200px\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in models\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\"\r\n          />\r\n        </el-select>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <h3>TIM参数</h3>\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-input\r\n          :prefix-icon=\"Edit\"\r\n          v-model=\"eps\"\r\n          placeholder=\"Please input eps\"\r\n          clearable\r\n          style=\"width: 200px\"\r\n        />\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-input\r\n          :prefix-icon=\"Edit\"\r\n          v-model=\"iters\"\r\n          placeholder=\"Please input iters\"\r\n          clearable\r\n          style=\"width: 200px\"\r\n        />\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-input\r\n          :prefix-icon=\"Edit\"\r\n          v-model=\"kernel_len\"\r\n          placeholder=\"Please input kernel_len\"\r\n          clearable\r\n          style=\"width: 200px\"\r\n        />\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-input\r\n          :prefix-icon=\"Edit\"\r\n          v-model=\"nsig\"\r\n          placeholder=\"Please input nsig\"\r\n          clearable\r\n          style=\"width: 200px\"\r\n        />\r\n      </div>\r\n      <div align=\"left\" style=\"margin: 10px\">\r\n        <el-radio-group v-model=\"goal\">\r\n          <el-radio :label=\"0\" border>模仿攻击</el-radio>\r\n          <el-radio :label=\"1\" border>躲避攻击</el-radio>\r\n        </el-radio-group>\r\n      </div>\r\n      <!-- <div align=\"left\" style=\"margin: 10px\">\r\n        <el-radio-group v-model=\"metric\">\r\n          <el-radio :label=\"0\" border>L2</el-radio>\r\n          <el-radio :label=\"1\" border>L∞</el-radio>\r\n        </el-radio-group>\r\n      </div> -->\r\n    </div>\r\n  </el-card>\r\n</template>\r\n<script>\r\nimport { Plus } from \"@element-plus/icons-vue\";\r\nimport { Delete } from \"@element-plus/icons-vue\";\r\nimport { SwitchButton } from \"@element-plus/icons-vue\";\r\nimport { Edit } from \"@element-plus/icons-vue\";\r\nimport axios from \"axios\";\r\nexport default {\r\n  name: \"app\",\r\n\r\n  data() {\r\n    return {\r\n      dialogTableVisible: false,\r\n      imageUrl_1: \"\",\r\n      imageUrl_2: \"\",\r\n      Delete,\r\n      SwitchButton,\r\n      Edit,\r\n      picurl: \"\",\r\n      eps: \"\",\r\n      goal: \"\",\r\n      metric: \"\",\r\n      model: \"\",\r\n      models: [\r\n        {\r\n          value: \"MobileFace\",\r\n          label: \"MobileFace\",\r\n        },\r\n        {\r\n          value: \"Mobilenet\",\r\n          label: \"Mobilenet\",\r\n        },\r\n        {\r\n          value: \"ArcFace\",\r\n          label: \"ArcFace\",\r\n        },\r\n        {\r\n          value: \"MobilenetV2\",\r\n          label: \"MobilenetV2\",\r\n        },\r\n        {\r\n          value: \"ShuffleNet_V1\",\r\n          label: \"ShuffleNet_V1\",\r\n        },\r\n        {\r\n          value: \"ShuffleNet_V2\",\r\n          label: \"ShuffleNet_V2\",\r\n        },\r\n        {\r\n          value: \"IR50-Softmax\",\r\n          label: \"IR50-Softmax\",\r\n        },\r\n        {\r\n          value: \"IR50-CosFace\",\r\n          label: \"IR50-CosFace\",\r\n        },\r\n        {\r\n          value: \"IR50-Am\",\r\n          label: \"IR50-Am\",\r\n        },\r\n        {\r\n          value: \"IR50-SphereFace\",\r\n          label: \"IR50-SphereFace\",\r\n        }\r\n      ],\r\n      attack: \"PGD\",\r\n      attacks: [\r\n        // {\r\n        //   value: \"FGSM\",\r\n        //   label: \"FGSM\",\r\n        // },\r\n        // {\r\n        //   value: \"CIM\",\r\n        //   label: \"CIM\",\r\n        // },\r\n        {\r\n          value: \"DIM\",\r\n          label: \"DIM\",\r\n        },\r\n        {\r\n          value: \"MIM\",\r\n          label: \"MIM\",\r\n        },\r\n        {\r\n          value: \"PGD\",\r\n          label: \"PGD\",\r\n        },\r\n        {\r\n          value: \"TIM\",\r\n          label: \"TIM\",\r\n        },\r\n      ],\r\n      iters: \"\",\r\n      mu: \"\",\r\n      length: \"\",\r\n      kernel_len: \"\",\r\n      nsig: \"\",\r\n      tableData: [{ score: \"\", or: \"\" }],\r\n      score: \"\",\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    goBack() {\r\n      this.$router.push(\"/home\");\r\n    },\r\n    cc() {\r\n      this.dialogTableVisible = true;\r\n      setTimeout(() => {\r\n        this.dialogTableVisible = false;\r\n      }, 5000);\r\n    },\r\n    // 上传图片\r\n    async uploadFile_1(params) {\r\n      let form = new FormData();\r\n      form.append(\"file\", params.file);\r\n\r\n      const res = await axios.post(\"http://127.0.0.1:5000/upload?src=0\", form);\r\n      console.log(res);\r\n      this.imageUrl_1 = res.data;\r\n    },\r\n    async uploadFile_2(params) {\r\n      let form = new FormData();\r\n      form.append(\"file\", params.file);\r\n\r\n      const res = await axios.post(\"http://127.0.0.1:5000/upload?src=1\", form);\r\n      console.log(res);\r\n      this.imageUrl_2 = res.data;\r\n    },\r\n    //删除图片\r\n    del_1() {\r\n      axios.get(\"http://127.0.0.1:5000/delete_1\", {}).then((res) => {\r\n        this.imageUrl_1 = res.data.img;\r\n      });\r\n    },\r\n    del_2() {\r\n      axios.get(\"http://127.0.0.1:5000/delete_2\", {}).then((res) => {\r\n        this.imageUrl_2 = res.data.img;\r\n      });\r\n    },\r\n    //从服务器获取图片\r\n    getPic() {\r\n      this.dialogTableVisible = true;\r\n      var that = this;\r\n      axios({\r\n        method: \"get\",\r\n        url:\r\n          \"http://127.0.0.1:5000/getPic?eps=\" +\r\n          this.eps +\r\n          \"&goal=\" +\r\n          this.goal +\r\n          \"&metric=\" +\r\n          this.metric +\r\n          \"&model=\" +\r\n          this.model +\r\n          \"&attack=\" +\r\n          this.attack +\r\n          \"&iters=\" +\r\n          this.iters +\r\n          \"&length=\" +\r\n          this.length +\r\n          \"&mu=\" +\r\n          this.mu +\r\n          \"&kernel_len=\" +\r\n          this.kernel_len +\r\n          \"&nsig=\" +\r\n          this.nsig,\r\n        responseType: \"arraybuffer\", // 最为关键\r\n      }).then(function (response) {\r\n        that.dialogTableVisible = false;\r\n        that.picurl =\r\n          \"data:image/png;base64,\" + that.arrayBufferToBase64(response.data);\r\n      });\r\n    },\r\n    // ArrayBuffer转为base64字符串\r\n    arrayBufferToBase64(buffer) {\r\n      //第一步，将ArrayBuffer转为二进制字符串\r\n      var binary = \"\";\r\n      var bytes = new Uint8Array(buffer);\r\n      var len = bytes.byteLength;\r\n      for (var i = 0; i < len; i++) {\r\n        binary += String.fromCharCode(bytes[i]);\r\n      }\r\n      //将二进制字符串转为base64字符串\r\n      return window.btoa(binary);\r\n    },\r\n    getScore() {\r\n      axios.get(\"http://127.0.0.1:5000/contrast\", {}).then((res) => {\r\n        this.tableData[0].score = res.data.Score;\r\n        if (this.tableData[0].score >= 50) {\r\n          this.tableData[0].or = \"Yes\";\r\n        } else {\r\n          this.tableData[0].or = \"No\";\r\n        }\r\n      });\r\n      // console.log(this.tableData[0].score);\r\n    },\r\n  },\r\n  components: { Plus },\r\n};\r\n</script>\r\n<style scoped>\r\n.na {\r\n  float: left;\r\n  margin-right: 20px;\r\n  margin-bottom: 20px;\r\n  margin-left: 100px;\r\n  margin-top: 30px;\r\n}\r\n.f {\r\n  float: right;\r\n  margin-right: 100px;\r\n  margin-bottom: 20px;\r\n  margin-left: 20px;\r\n  margin-top: 30px;\r\n}\r\n.xx {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n}\r\n.avatar-uploader .avatar {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\r\n}\r\n.avatar {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\r\n}\r\n.jj {\r\n  margin-right: 20px;\r\n  margin-bottom: 20px;\r\n  margin-left: 20px;\r\n  margin-top: 20px;\r\n}\r\n</style>\r\n\r\n<style>\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n  transition: var(--el-transition-duration-fast);\r\n}\r\n\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: var(--el-color-primary);\r\n}\r\n\r\n.el-icon.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  text-align: center;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}